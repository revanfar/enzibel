---
- hosts: server1
  remote_user: ubuntu
  become: true
  become_method: sudo

  tasks:
     - name: Instaling Packages needed
       apt: name={{item}} state=latest
       with_items:
           - [ 'git', 'python-pip', 'python-dev', 'python-eventlet', 'python-routes', 'python-webob', 'python-paramiko']          
     - name: Clone RYU git repo
       git: repo=git://github.com/osrg/ryu.git
            dest=/root/ryu    
     - name: PIP setuptools upgrade
       command: pip install setuptools --upgrade
     - name: Moving to RYU directory
       shell: chdir /root/ryu
     - name: Installing ryu
       command: python /root/ryu/setup.py install
       ignore_errors: yes
     - name: Pip six
       command: pip install six --upgrade
     - name: Pip oslo
       command: pip install oslo.config msgpack-python
     - name: Pip eventlet
       command: pip install eventlet --upgrade
     - name: Checking ryu manager
       command: ryu-manager --version
